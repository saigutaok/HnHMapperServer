@using MudBlazor

<!-- Context menu for custom marker operations (shown on right-click on custom marker) -->
@if (Visible)
{
    <div class="context-menu" style="position: fixed; left: @(Left)px; top: @(Top)px; z-index: 2000;">
        <MudPaper Elevation="4">
            <MudList T="string" Dense="true">
                <MudListItem T="string" OnClick="@(() => OnSetTimer.InvokeAsync())">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@(HasTimer ? Icons.Material.Filled.Edit : Icons.Material.Filled.Timer)"
                                 Size="Size.Small"
                                 Color="@(HasTimer ? Color.Primary : Color.Warning)" />
                        <MudText>@(HasTimer ? "Edit Timer" : "Set Timer")</MudText>
                    </MudStack>
                </MudListItem>
                <MudListItem T="string" OnClick="@(() => OnPing.InvokeAsync())">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.LocationSearching" Size="Size.Small" Color="Color.Error" />
                        <MudText>Ping (60s)</MudText>
                    </MudStack>
                </MudListItem>
                <MudDivider />
                <MudListItem T="string" OnClick="@(() => OnEdit.InvokeAsync())">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Edit" Size="Size.Small" Color="Color.Primary" />
                        <MudText>Edit</MudText>
                    </MudStack>
                </MudListItem>
                <MudListItem T="string" OnClick="@(() => OnDelete.InvokeAsync())">
                    <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                        <MudIcon Icon="@Icons.Material.Filled.Delete" Size="Size.Small" Color="Color.Error" />
                        <MudText>Delete</MudText>
                    </MudStack>
                </MudListItem>
            </MudList>
        </MudPaper>
    </div>
}

@code {
    /// <summary>
    /// Whether the context menu is visible
    /// </summary>
    [Parameter] public bool Visible { get; set; }

    /// <summary>
    /// X position of the context menu in screen coordinates
    /// </summary>
    [Parameter] public int Left { get; set; }

    /// <summary>
    /// Y position of the context menu in screen coordinates
    /// </summary>
    [Parameter] public int Top { get; set; }

    /// <summary>
    /// ID of the custom marker being operated on
    /// </summary>
    [Parameter] public int CustomMarkerId { get; set; }

    /// <summary>
    /// Whether this custom marker has an active timer (changes "Set Timer" to "Edit Timer")
    /// </summary>
    [Parameter] public bool HasTimer { get; set; }

    /// <summary>
    /// Event callback when set timer is selected
    /// </summary>
    [Parameter] public EventCallback OnSetTimer { get; set; }

    /// <summary>
    /// Event callback when ping is selected
    /// </summary>
    [Parameter] public EventCallback OnPing { get; set; }

    /// <summary>
    /// Event callback when edit is selected
    /// </summary>
    [Parameter] public EventCallback OnEdit { get; set; }

    /// <summary>
    /// Event callback when delete is selected
    /// </summary>
    [Parameter] public EventCallback OnDelete { get; set; }
}
