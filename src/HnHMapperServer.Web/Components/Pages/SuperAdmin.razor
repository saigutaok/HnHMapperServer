@page "/superadmin"
@rendermode InteractiveServer
@attribute [Microsoft.AspNetCore.Authorization.Authorize(Roles = "SuperAdmin")]
@using HnHMapperServer.Web.Components.SuperAdmin
@using HnHMapperServer.Web.Models
@using Microsoft.AspNetCore.Components.Authorization
@inject IHttpClientFactory HttpClientFactory
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar
@inject IDialogService DialogService
@inject AuthenticationStateProvider AuthenticationStateProvider

<PageTitle>SuperAdmin Panel - HnH Mapper</PageTitle>
<div class="superadmin-panel">
<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudText Typo="Typo.h3" Class="mb-6">
        <MudIcon Icon="@Icons.Material.Filled.SupervisorAccount" Class="me-2" />
        SuperAdmin Panel
    </MudText>

    <MudAlert Severity="Severity.Info" Dense="true" Class="mb-4">
        <strong>System Administrator:</strong> You have global access to all tenants, users, and system operations.
    </MudAlert>

    <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
        @* Tenants Tab *@
        <MudTabPanel Text="Tenants" Icon="@Icons.Material.Filled.Business">
            <TenantList />
        </MudTabPanel>

        @* Unassigned Users Tab *@
        <MudTabPanel Text="Unassigned Users" Icon="@Icons.Material.Filled.PersonAddDisabled">
            <UnassignedUsersList />
        </MudTabPanel>

        @* Maps & Markers Tab with Sub-tabs *@
        <MudTabPanel Text="Maps & Markers" Icon="@Icons.Material.Filled.Explore">
            <MudTabs Elevation="0" Rounded="false" Border="true" ApplyEffectsToContainer="false" PanelClass="pa-4">
                <MudTabPanel Text="All Maps" Icon="@Icons.Material.Filled.Map">
                    <GlobalMapsViewer />
                </MudTabPanel>
                <MudTabPanel Text="Game Markers" Icon="@Icons.Material.Filled.LocationOn">
                    <GlobalMarkersViewer />
                </MudTabPanel>
                <MudTabPanel Text="Custom Markers" Icon="@Icons.Material.Filled.PushPin">
                    <GlobalCustomMarkersViewer />
                </MudTabPanel>
            </MudTabs>
        </MudTabPanel>

        @* System Operations Tab *@
        <MudTabPanel Text="System" Icon="@Icons.Material.Filled.Settings">
            <SystemOperations />
        </MudTabPanel>

        @* Database Browser Tab *@
        <MudTabPanel Text="Database" Icon="@Icons.Material.Filled.TableChart">
            <DatabaseViewer />
        </MudTabPanel>

        @* Global Audit Logs Tab *@
        <MudTabPanel Text="Audit Logs" Icon="@Icons.Material.Filled.History">
            <GlobalAuditLogs />
        </MudTabPanel>

        @* Configuration Tab *@
        <MudTabPanel Text="Config" Icon="@Icons.Material.Filled.Tune">
            <ConfigManagement />
        </MudTabPanel>
    </MudTabs>

    <MudButton Variant="Variant.Text" Color="Color.Default" Href="/" Class="mt-4" StartIcon="@Icons.Material.Filled.ArrowBack">
        Back to Dashboard
    </MudButton>
</MudContainer>
</div>

@code {
}
